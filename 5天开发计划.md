## 医院患者预约挂号系统 - 5天开发计划

文档版本：v1.0  
编制日期：2025-10-31  
依据文档：`需求说明书.md`、`技术架构说明.md`、`MySQL数据库设计.md`

---

## 开发概览

### 技术栈
- **前端**：React 18 + JavaScript + Ant Design + React Router v6 + Axios
- **后端**：Java 21 + Spring Boot 3.x + Spring Security + JWT + JPA
- **数据库**：MySQL 8.0（已初始化 `init_hospital_db.sql`）

### 开发原则
- 前后端并行开发，接口优先约定
- 每日完成功能必须可演示
- 核心功能优先，边缘功能后置
- 代码提交规范：`feat: `、`fix: `、`test: `

---

## 第一天：项目初始化 + 三端登录功能（必须完成）

### 🎯 目标
完成项目基础架构搭建，实现患者、医生、管理员三端登录与退出功能，确保登录态管理正确。

### 📋 任务清单

#### 后端任务（优先级最高）
1. **项目初始化**（1h）
   - 创建 Spring Boot 3.x 项目（使用 Spring Initializr）
   - 依赖：Spring Web、Spring Data JPA、MySQL Driver、Spring Security、JWT（jjwt）、Lombok、Validation
   - 配置 `application.properties`（数据库连接：root/jyh20050820）
   - 执行 `init_hospital_db.sql` 初始化数据库

2. **实体与数据访问层**（1.5h）
   - 创建实体：`Patient`、`Doctor`、`Admin`
   - 创建 Repository：`PatientRepository`、`DoctorRepository`、`AdminRepository`
   - 测试数据库连接与基础 CRUD

3. **JWT 工具类与 Spring Security 配置**（2h）
   - 实现 `JwtUtil`（生成 token，解析 token，验证 token）
   - 配置 `SecurityConfig`：
     - `/api/v1/auth/**` 放行
     - 其他接口需认证
   - 实现 `JwtAuthenticationFilter`（拦截请求，验证 token）

4. **认证接口实现**（3h）
   - **患者注册** `POST /api/v1/auth/patient/register`
     - 入参：`{ account, password, confirmPassword, phone, realName }`
     - 校验：账号唯一、密码一致、手机号 11 位
     - 密码使用 BCrypt 加密
     - 返回：`{ message: "注册成功" }`
   
   - **患者登录** `POST /api/v1/auth/patient/login`
     - 入参：`{ account, password }`
     - 校验：账号存在、密码正确
     - 返回：`{ token, role: "PATIENT", userId, realName }`
   
   - **医生登录** `POST /api/v1/auth/doctor/login`
     - 入参：`{ account, password, verifyCode }`
     - 校验：账号存在、密码正确、校验码 = "Doctor"
     - 返回：`{ token, role: "DOCTOR", userId, name }`
   
   - **管理员登录** `POST /api/v1/auth/admin/login`
     - 入参：`{ account, password }`
     - 校验：固定账号 admin/admin123
     - 返回：`{ token, role: "ADMIN", userId }`
   
   - **退出登录** `POST /api/v1/auth/logout`
     - 前端清除 token 即可，后端返回成功

5. **统一异常处理**（0.5h）
   - `@ControllerAdvice` 全局异常处理
   - 返回格式：`{ code, message, traceId }`

#### 前端任务
1. **项目初始化**（1h）
   - 使用 `create-react-app` 或 `vite` 创建项目
   - 安装依赖：`antd`、`react-router-dom`、`axios`、`@reduxjs/toolkit`、`react-redux`
   - 配置环境变量：`.env.development` → `REACT_APP_API_BASE_URL=http://localhost:8080/api/v1`

2. **Axios 封装**（0.5h）
   - 创建 `services/http.js`
   - 请求拦截器：添加 `Authorization: Bearer <token>`
   - 响应拦截器：401 自动跳转登录，清除 token

3. **Redux 状态管理**（1h）
   - 创建 `store/authSlice.js`：管理 `token`、`role`、`userId`、`userName`
   - 实现 `login`、`logout` action

4. **登录页面**（3h）
   - **统一登录入口** `/login`
     - Tab 切换：患者登录、医生登录、管理员登录
     - 患者表单：账号、密码
     - 医生表单：账号、密码、校验码（固定输入 "Doctor"）
     - 管理员表单：账号、密码
     - 登录成功后根据 `role` 跳转到对应端首页：
       - `PATIENT` → `/patient/dashboard`
       - `DOCTOR` → `/doctor/dashboard`
       - `ADMIN` → `/admin/dashboard`
   
   - **患者注册页面** `/register`
     - 表单：账号、密码、确认密码、手机号（11 位校验）、真实姓名
     - 校验：密码一致、手机号格式
     - 注册成功后跳转登录页

5. **路由配置**（1h）
   - 创建 `routes/index.jsx`
   - 路由守卫：未登录跳转 `/login`
   - 按角色保护路由（患者/医生/管理员不能互相访问）

6. **三端首页框架**（1.5h）
   - **患者端首页** `/patient/dashboard`（Layout + 侧边栏菜单）
     - 顶部：欢迎语 + 用户名 + 退出按钮
     - 侧边栏：预约挂号、我的预约、我的就诊情况、个人信息
   
   - **医生端首页** `/doctor/dashboard`（Layout + 侧边栏菜单）
     - 顶部：欢迎语 + 医生姓名 + 退出按钮
     - 侧边栏：我的预约、在岗设置、个人信息
   
   - **管理员首页** `/admin/dashboard`（Layout + 侧边栏菜单）
     - 顶部：管理员 + 退出按钮
     - 侧边栏：科室管理、医生管理、数据统计、评分排行、预约就诊信息

### ✅ 验收标准
- [x] 数据库初始化完成，表结构正确
- [x] 后端三个登录接口可通过 Postman 测试
- [x] 患者可注册、登录，跳转到患者端首页
- [x] 医生输入账号密码 + "Doctor" 可登录（需管理员先添加医生数据）
- [x] 管理员 admin/admin123 可登录
- [x] 登录后刷新页面，登录态保持（localStorage）
- [x] 点击退出按钮，清除登录态，跳转登录页
- [x] 未登录访问受保护路由，自动跳转登录页

### 📝 备注
- 管理员初始数据已在 SQL 中插入
- 医生数据需在数据库手动插入测试数据，或等第三天管理员添加医生功能完成后测试

---

## 第二天：患者端核心功能（查询 + 预约 + 退号）

### 🎯 目标
完成患者端的科室/医生查询、预约挂号、我的预约管理（退号）功能。

### 📋 任务清单

#### 后端任务
1. **科室与医生查询接口**（2h）
   - `GET /api/v1/departments`
     - 返回所有启用的科室列表：`[{ id, name, description }]`
   
   - `GET /api/v1/doctors?departmentId={id}`
     - 根据科室查询医生列表（含在岗状态）
     - 返回：`[{ id, name, status, departments, avatarUrl }]`
   
   - `GET /api/v1/doctors/{id}/schedules?startDate={date}&endDate={date}`
     - 查询医生在未来 1-7 天的可预约时段
     - 过滤不在岗时段
     - 返回：`[{ date, timeSlots: [{start, end, available}] }]`

2. **预约接口**（2h）
   - `POST /api/v1/appointments`
     - 入参：`{ doctorId, departmentId, visitAt, illnessDesc }`
     - 校验：
       - visitAt 在未来 1-7 天范围内
       - 医生在该时段为在岗状态
       - 该时段未被预约（可选：加锁防止冲突）
     - 创建预约记录，状态 = PENDING
     - 返回：`{ id, status: "PENDING", visitAt }`
   
   - `GET /api/v1/appointments/mine`
     - 查询当前患者的所有预约记录
     - 返回：`[{ id, doctorName, departmentName, visitAt, status, illnessDesc, createdAt }]`
   
   - `DELETE /api/v1/appointments/{id}`
     - 退号：将预约状态改为 CANCELLED
     - 校验：只能退自己的预约，且状态为 PENDING
     - 返回：`{ message: "退号成功" }`

3. **实体与关联**（1h）
   - 创建 `Department` 实体与 Repository
   - 创建 `Schedule` 实体与 Repository
   - 创建 `Appointment` 实体与 Repository
   - 完善 `Doctor` 与 `Department` 的多对多关联（`doctor_departments`）

#### 前端任务
1. **预约挂号页面**（4h）
   - **步骤一：选择科室**
     - 展示科室列表（卡片或列表形式）
     - 点击进入步骤二
   
   - **步骤二：选择医生**
     - 根据科室加载医生列表
     - 显示医生姓名、擅长科室、在岗状态
     - 点击医生进入步骤三
   
   - **步骤三：选择时间**
     - 日期选择器（限制 1-7 天）
     - 加载该医生的可预约时段
     - 选择时间段
   
   - **步骤四：填写病情描述**
     - 文本框输入病情描述（选填，最多 500 字）
     - 确认信息：科室、医生、时间、描述
     - 提交预约

2. **我的预约页面**（2.5h）
   - 表格展示预约列表：
     - 列：预约ID、科室、医生、就诊时间、状态、病情描述、操作
   - 状态标签：待就诊（蓝色）、已就诊（绿色）、已退号（灰色）
   - 操作列：
     - 待就诊状态：显示"退号"按钮
     - 其他状态：无操作
   - 点击退号弹出确认对话框，成功后刷新列表

3. **API 服务封装**（0.5h）
   - `services/departmentApi.js`：科室查询
   - `services/doctorApi.js`：医生查询、时段查询
   - `services/appointmentApi.js`：创建预约、查询预约、退号

### ✅ 验收标准
- [x] 患者可查看所有科室列表
- [x] 患者选择科室后可查看该科室的医生
- [x] 患者选择医生后可查看医生的可预约时段（未来 1-7 天）
- [x] 患者可完成预约流程，提交成功后在"我的预约"看到记录
- [x] 患者可退号，退号后状态变更为"已退号"
- [x] 预约时间限制在 1-7 天，超出范围提示错误

### 📝 备注
- 时段查询逻辑：需结合 `schedules` 表查询医生在岗时段，前端展示可选时间
- 可先简化：假设医生全天在岗，按整点时段（如 9:00、10:00）生成可选项

---

## 第三天：管理员端功能（科室管理 + 医生管理）

### 🎯 目标
完成管理员对科室和医生的增删改查功能。

### 📋 任务清单

#### 后端任务
1. **科室管理接口**（1.5h）
   - `GET /api/v1/admin/departments`
     - 返回所有科室（含禁用）
   
   - `POST /api/v1/admin/departments`
     - 入参：`{ name, description }`
     - 校验：科室名称唯一
     - 返回：`{ id, name, description, enabled }`
   
   - `PUT /api/v1/admin/departments/{id}`
     - 入参：`{ name?, description?, enabled? }`
     - 更新科室信息
   
   - `DELETE /api/v1/admin/departments/{id}`
     - 删除科室（硬删除或软删除 enabled=0）
     - 级联处理：删除 `doctor_departments` 关联

2. **医生管理接口**（2.5h）
   - `GET /api/v1/admin/doctors`
     - 返回所有医生列表（含关联科室）
     - 返回：`[{ id, name, account, status, departments: [{id, name}], avatarUrl }]`
   
   - `POST /api/v1/admin/doctors`
     - 入参：`{ account, password, name, departmentIds: [], avatarUrl? }`
     - 校验：账号唯一
     - 密码 BCrypt 加密
     - 创建医生记录，同时插入 `doctor_departments` 关联
     - 返回：`{ id, account, name, status }`
   
   - `PUT /api/v1/admin/doctors/{id}`
     - 入参：`{ name?, departmentIds?, status?, avatarUrl? }`
     - 更新医生信息与关联科室
   
   - `DELETE /api/v1/admin/doctors/{id}`
     - 物理删除医生记录
     - 级联删除 `doctor_departments`、`schedules`
     - 预约表的 `doctor_id` 外键为 SET NULL

3. **权限控制**（1h）
   - 添加 `@PreAuthorize("hasRole('ADMIN')")` 注解到管理员接口
   - 配置 Spring Security：`/api/v1/admin/**` 需要 ADMIN 角色

#### 前端任务
1. **科室管理页面**（2.5h）
   - 表格展示科室列表：
     - 列：科室ID、科室名称、描述、状态（启用/禁用）、操作
   - 操作列：编辑、删除
   - 顶部："添加科室"按钮
   - 点击"添加科室"弹出表单对话框：
     - 输入：科室名称、描述
     - 提交后刷新列表
   - 点击"编辑"弹出表单对话框：
     - 可修改名称、描述、启用状态
   - 点击"删除"弹出确认对话框

2. **医生管理页面**（3h）
   - 表格展示医生列表：
     - 列：医生ID、账号、姓名、擅长科室（标签）、在岗状态、头像、操作
   - 操作列：编辑状态、删除
   - 顶部："添加医生"按钮
   - 点击"添加医生"弹出表单对话框：
     - 输入：账号、密码、姓名、擅长科室（多选）、头像上传（可选）
     - 提交后刷新列表
   - 点击"编辑状态"弹出对话框：
     - 切换在岗/不在岗状态
   - 点击"删除"弹出确认对话框

3. **文件上传组件**（1h）
   - 头像上传：使用 Ant Design Upload 组件
   - 选择本地文件后，上传到后端（或前端保存路径）

### ✅ 验收标准
- [x] 管理员可查看所有科室列表
- [x] 管理员可添加、编辑、删除科室
- [x] 管理员可查看所有医生列表（含擅长科室）
- [x] 管理员可添加医生（账号、密码、姓名、擅长科室）
- [x] 管理员可修改医生的在岗状态
- [x] 管理员可删除医生（删除后医生无法登录）
- [x] 删除科室后，医生的擅长科室关联同步更新

### 📝 备注
- 头像上传可简化：前端选择文件后，保存文件路径到数据库（不实际上传文件服务器）

---

## 第四天：医生端功能（预约管理 + 会诊完成）+ 患者端就诊记录

### 🎯 目标
完成医生端的预约查看、会诊完成功能，以及患者端的就诊记录查看与评价功能。

### 📋 任务清单

#### 后端任务
1. **医生预约查询接口**（1h）
   - `GET /api/v1/doctor/appointments`
     - 查询当前医生的所有预约记录
     - 返回：`[{ id, patientName, patientAge, visitAt, status, illnessDesc, createdAt }]`
   
   - `GET /api/v1/doctor/appointments/{id}`
     - 查询预约详情（含患者信息）
     - 返回：`{ id, patient: {name, age, phone, height, weight}, visitAt, status, illnessDesc }`

2. **会诊完成接口**（2h）
   - `POST /api/v1/doctor/appointments/{id}/complete`
     - 入参：`{ advice, fee, itemIds: [{itemId, quantity}] }`
     - 校验：
       - 预约状态必须为 PENDING
       - 该预约是当前医生的
     - 业务逻辑：
       - 将预约状态改为 VISITED
       - 创建就诊记录（`visits`）
       - 插入就诊项目关联（`visit_items`）
       - 计算总费用
     - 返回：`{ message: "会诊完成", visitId }`

3. **在岗时段管理接口**（1.5h）
   - `GET /api/v1/doctor/schedules`
     - 查询当前医生的所有在岗时段
     - 返回：`[{ id, startAt, endAt, status }]`
   
   - `POST /api/v1/doctor/schedules`
     - 入参：`{ startAt, endAt, status }`
     - 创建在岗时段
   
   - `PUT /api/v1/doctor/schedules/{id}`
     - 入参：`{ status }`
     - 更新时段状态（在岗/不在岗）

4. **患者就诊记录接口**（1.5h）
   - `GET /api/v1/patient/visits`
     - 查询当前患者的所有就诊记录
     - 返回：`[{ id, doctorName, departmentName, visitAt, fee, doctorAdvice, items: [{name, quantity, amount}] }]`
   
   - `GET /api/v1/patient/visits/{id}`
     - 查询就诊记录详情

5. **评价接口**（1h）
   - `POST /api/v1/patient/reviews`
     - 入参：`{ visitId, doctorId?, departmentId?, score, comment? }`
     - 校验：score 范围 1-10，doctorId 或 departmentId 至少一个
     - 创建评价记录
     - 返回：`{ message: "评价成功" }`

6. **药品服务项目接口**（0.5h）
   - `GET /api/v1/items?type={DRUG|SERVICE}`
     - 查询所有启用的药品/服务项目
     - 返回：`[{ id, name, price, type }]`

#### 前端任务
1. **医生端：我的预约页面**（2.5h）
   - 表格展示预约列表：
     - 列：预约ID、患者姓名、就诊时间、状态、操作
   - 状态筛选：待就诊、已就诊、已退号
   - 操作列：
     - 待就诊：显示"查看详情"、"会诊"按钮
     - 已就诊：显示"查看详情"按钮
     - 已退号：无操作
   - 点击"查看详情"弹出对话框：
     - 显示患者姓名、年龄、手机号、身高、体重、病情描述

2. **医生端：会诊页面**（3h）
   - 点击"会诊"按钮进入会诊页面（或弹出对话框）
   - 表单内容：
     - 患者信息展示（只读）
     - 医生建议（文本框，必填）
     - 药品服务选择（多选下拉，可添加多个）
       - 每项显示：药品/服务名称、单价、数量输入框
     - 自动计算总费用
   - 提交后预约状态变更为"已就诊"

3. **医生端：在岗设置页面**（2h）
   - 展示当前医生的在岗时段列表
   - 表格列：开始时间、结束时间、状态、操作
   - 操作：切换状态（在岗/不在岗）
   - 顶部："添加时段"按钮
   - 点击"添加时段"弹出表单：
     - 日期时间选择器（开始时间、结束时间）
     - 状态选择（在岗/不在岗）

4. **患者端：我的就诊情况页面**（2h）
   - 表格展示就诊记录列表：
     - 列：就诊ID、科室、医生、就诊时间、费用、操作
   - 操作列："查看详情"、"评价"（未评价时显示）
   - 点击"查看详情"弹出对话框：
     - 显示科室、医生、时间、费用、医生建议、药品服务清单
   - 点击"评价"弹出表单：
     - 评价对象选择：医生、科室（可同时评价）
     - 评分滑块（1-10 分）
     - 评价内容（文本框，选填）
     - 提交后标记为已评价

### ✅ 验收标准
- [x] 医生可查看自己的预约列表
- [x] 医生可查看患者详情（姓名、年龄、病情描述）
- [x] 医生可完成会诊（填写建议、选择药品服务、计算费用）
- [x] 会诊完成后，预约状态变为"已就诊"
- [x] 患者可在"我的就诊情况"查看就诊记录
- [x] 患者可对医生/科室进行评价（1-10 分）
- [x] 医生可设置在岗时段，状态切换后影响患者预约

### 📝 备注
- 药品服务数据已在 `init_hospital_db.sql` 中初始化
- 评价功能可简化：每次就诊只能评价一次

---

## 第五天：管理员统计分析 + 个人信息管理 + 测试优化

### 🎯 目标
完成管理员的数据统计与评分排行功能，完善三端个人信息管理，进行全流程测试与优化。

### 📋 任务清单

#### 后端任务
1. **统计分析接口**（2h）
   - `GET /api/v1/admin/stats/overview`
     - 返回总体统计：
       - 医生总数、在岗医生数、不在岗医生数
       - 今日预约数、今日就诊数
       - 患者总数
     - 返回：`{ totalDoctors, onDutyDoctors, offDutyDoctors, todayAppointments, todayVisits, totalPatients }`
   
   - `GET /api/v1/admin/stats/daily-appointments?startDate={date}&endDate={date}`
     - 查询日期范围内的每日预约数据
     - 返回：`[{ date, totalAppointments, pending, visited, cancelled }]`
   
   - `GET /api/v1/admin/stats/daily-visits?startDate={date}&endDate={date}`
     - 查询日期范围内的每日就诊数据
     - 返回：`[{ date, totalVisits, totalFee }]`

2. **评分排行接口**（1.5h）
   - `GET /api/v1/admin/rankings/doctors?limit={num}`
     - 查询医生评分排行（按平均分降序）
     - 返回：`[{ doctorId, doctorName, avgScore, reviewCount }]`
   
   - `GET /api/v1/admin/rankings/departments?limit={num}`
     - 查询科室评分排行（按平均分降序）
     - 返回：`[{ departmentId, departmentName, avgScore, reviewCount }]`

3. **预约就诊信息查询接口**（1h）
   - `GET /api/v1/admin/appointments?status={status}&page={page}&size={size}`
     - 查询所有预约记录（分页）
     - 返回：患者姓名、医生姓名、科室、时间、状态
   
   - `GET /api/v1/admin/visits?page={page}&size={size}`
     - 查询所有就诊记录（分页）
     - 返回：患者姓名、医生姓名、科室、时间、费用

4. **个人信息管理接口**（1.5h）
   - **患者**
     - `GET /api/v1/patient/me`：查询个人信息
     - `PUT /api/v1/patient/me`：更新个人信息（age、height、weight、avatarUrl）
   
   - **医生**
     - `GET /api/v1/doctor/me`：查询个人信息
     - `PUT /api/v1/doctor/me`：更新个人信息（name、departmentIds、avatarUrl）

5. **就诊提醒接口（简化版）**（1h）
   - `GET /api/v1/patient/appointments/{id}/reminder`
     - 判断预约时间是否临近（如 1 小时内）
     - 返回：`{ hasReminder: true/false, message: "您的预约即将开始" }`

#### 前端任务
1. **管理员：数据统计页面**（2.5h）
   - 仪表盘展示：
     - 顶部卡片：医生总数、在岗医生数、今日预约数、今日就诊数、患者总数
     - 图表（可选，使用 ECharts 或简单表格）：
       - 近 7 天预约趋势图（折线图）
       - 近 7 天就诊趋势图（柱状图）

2. **管理员：评分排行页面**（2h）
   - 两个 Tab：医生排行、科室排行
   - 表格展示：
     - 医生排行：排名、医生姓名、平均分、评价数
     - 科室排行：排名、科室名称、平均分、评价数
   - 默认显示前 10 名

3. **管理员：预约就诊信息页面**（2h）
   - 两个 Tab：预约信息、就诊信息
   - **预约信息表格**：
     - 列：预约ID、患者姓名、医生姓名、科室、就诊时间、状态
     - 状态筛选、分页
   - **就诊信息表格**：
     - 列：就诊ID、患者姓名、医生姓名、科室、就诊时间、费用
     - 分页

4. **患者端：个人信息页面**（1.5h）
   - 展示当前信息：账号、姓名（只读）、手机号（只读）
   - 可编辑字段：年龄、身高、体重、头像
   - 保存后提示"更新成功"

5. **医生端：个人信息页面**（1.5h）
   - 展示当前信息：账号（只读）、姓名
   - 可编辑字段：擅长科室（多选）、头像
   - 保存后提示"更新成功"

6. **就诊提醒功能（简化）**（1h）
   - 在"我的预约"页面，对于即将开始的预约（1 小时内）显示提醒标签
   - 可选：使用浏览器通知 API 弹出提醒

7. **全流程测试与优化**（2h）
   - **测试用例**：
     1. 患者注册 → 登录 → 预约 → 退号
     2. 管理员添加医生 → 医生登录 → 设置在岗 → 查看预约 → 会诊完成
     3. 患者查看就诊记录 → 评价医生/科室
     4. 管理员查看统计数据、评分排行、预约就诊信息
   - **优化**：
     - 前端表单验证优化
     - 错误提示友好化
     - 加载状态与空状态处理
     - 响应式布局调整

### ✅ 验收标准
- [x] 管理员可查看总体统计数据（医生数、预约数、就诊数）
- [x] 管理员可查看近 7 天预约/就诊趋势（图表或表格）
- [x] 管理员可查看医生和科室评分排行
- [x] 管理员可查看所有预约和就诊信息（分页）
- [x] 患者可更新个人信息（年龄、身高、体重、头像）
- [x] 医生可更新个人信息（擅长科室、头像）
- [x] 患者预约临近时显示提醒标签（后端接口已实现）
- [ ] 完成全流程测试，无明显 Bug

### 📝 备注
- 图表可使用 ECharts 或简单表格展示
- 提醒功能可简化为前端轮询，判断时间是否临近

---

## 项目交付清单

### 代码结构
```
Hospital/
  ├── frontend/               # React 前端项目
  │   ├── src/
  │   │   ├── app/            # 应用入口与全局配置
  │   │   ├── routes/         # 路由配置（按角色分区）
  │   │   ├── pages/          # 页面组件
  │   │   │   ├── Login/      # 登录页
  │   │   │   ├── Register/   # 注册页
  │   │   │   ├── Patient/    # 患者端页面
  │   │   │   ├── Doctor/     # 医生端页面
  │   │   │   └── Admin/      # 管理员端页面
  │   │   ├── components/     # 复用组件
  │   │   ├── features/       # 领域模块（可选）
  │   │   ├── store/          # Redux 状态管理
  │   │   ├── services/       # API 服务
  │   │   ├── hooks/          # 自定义 Hooks
  │   │   ├── utils/          # 工具函数
  │   │   ├── assets/         # 静态资源
  │   │   └── index.jsx       # React 入口
  │   ├── package.json
  │   └── .env.development
  │
  ├── backend/                # Java Spring Boot 后端项目
  │   ├── src/main/java/
  │   │   └── com/hospital/
  │   │       ├── HospitalApplication.java  # 应用入口
  │   │       ├── controller/ # REST API 控制器
  │   │       ├── service/    # 业务逻辑层
  │   │       ├── repository/ # 数据访问层
  │   │       ├── entity/     # 实体类
  │   │       ├── dto/        # 数据传输对象
  │   │       ├── mapper/     # 实体与DTO映射
  │   │       ├── config/     # 配置类
  │   │       ├── security/   # 安全相关（JWT等）
  │   │       ├── exception/  # 异常处理
  │   │       ├── enums/      # 枚举类
  │   │       └── util/       # 工具类
  │   ├── src/main/resources/
  │   │   ├── application.properties
  │   │   └── db/migration/   # Flyway 迁移脚本
  │   └── pom.xml
  │
  ├── init_hospital_db.sql    # 数据库初始化脚本
  ├── 需求说明书.md
  ├── 技术架构说明.md
  ├── MySQL数据库设计.md
  └── 5天开发计划.md
```

### 功能清单
- ✅ 三端登录（患者、医生、管理员）
- ✅ 患者注册
- ✅ 患者预约挂号（科室 → 医生 → 时间 → 病情描述）
- ✅ 患者退号
- ✅ 患者查看预约列表
- ✅ 患者查看就诊记录
- ✅ 患者评价医生/科室
- ✅ 患者个人信息管理
- ✅ 医生查看预约列表与患者信息
- ✅ 医生会诊完成（填写建议、选择药品服务）
- ✅ 医生设置在岗时段
- ✅ 医生个人信息管理
- ✅ 管理员科室管理（增删改查）
- ✅ 管理员医生管理（增删改查）
- ✅ 管理员数据统计（医生数、预约数、就诊数）
- ✅ 管理员评分排行（医生排行、科室排行）
- ✅ 管理员查看预约就诊信息
- ✅ 就诊提醒（简化版）

### 技术要求
- 前端：React 18 + JavaScript + Ant Design
- 后端：Java 21 + Spring Boot 3.x + JWT + JPA
- 数据库：MySQL 8.0（root/jyh20050820）
- 部署：本地运行测试

### 验收标准
- 所有功能正常运行，无明显 Bug
- 登录态管理正确，刷新页面不丢失
- 退出后清除登录态
- 前后端数据一致，状态实时更新
- 表单校验完善，错误提示友好
- 页面交互流畅，无明显卡顿

---

## 开发建议

### 时间分配
- 第一天：重点后端认证与前端登录框架，必须完成三端登录
- 第二天：患者核心流程，优先完成预约功能
- 第三天：管理员功能，为测试提供医生数据
- 第四天：医生端与患者就诊记录，打通完整业务闭环
- 第五天：统计分析与优化，确保交付质量

### 开发顺序
1. 数据库先行：第一天先执行 `init_hospital_db.sql`
2. 接口优先：后端先完成接口，前端再调用
3. 核心优先：先完成核心功能，边缘功能后置
4. 测试并行：每完成一个功能立即测试

### 注意事项
- JWT token 存储在 `localStorage`，退出时清除
- 密码使用 BCrypt 加密，不可明文存储
- 手机号校验 11 位，前端与后端都要校验
- 预约时间限制 1-7 天，前端禁用其他日期
- 医生登录必须输入校验码 "Doctor"
- 管理员账号固定 admin/admin123
- 关闭应用后重新打开需重新登录

---

附：本开发计划基于 `需求说明书.md`、`技术架构说明.md`、`MySQL数据库设计.md` 制定，如有调整以实际开发为准。

